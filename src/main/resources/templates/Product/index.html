<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns="http://www.w3.org/1999/xhtml"
>
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Products Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/css/indexProduct.css" />
    <script src="/indexProductScript.js"></script>
  </head>
  <body class="bg-gray-100">
    <div class="min-h-screen bg-gray-100 text-gray-900">
      <main>
        <div class="py-6">
          <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="px-4 py-6 sm:px-0">
              <div
                class="border-4 border-dashed border-gray-200 rounded-lg h-96"
              >
                <!-- Content goes here -->
                <div class="flex flex-col">
                  <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
                    <div class="py-4 inline-block min-w-full sm:px-6 lg:px-8">
                      <div class="overflow-hidden">
                        <div class="flex items-center justify-between pb-4">
                          <h1 class="text-3xl font-semibold text-gray-800">
                            Products
                          </h1>
                          <div
                            class="text-2xl font-semibold text-gray-500"
                            th:text="${products.size()}"
                          ></div>
                          <div class="flex items-center">
                            <!-- Avatar icon -->
                            <div class="relative">
                              <img
                                alt="User avatar"
                                class="h-8 w-8 rounded-full"
                                height="32"
                                src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-eOISpav9ZsFZKYh63oPt5naS/user-uHcwB4PEMU74A3oP7PHYkycM/img-lXUo6Q6kWYqUjpAkqQAG8hiR.png?st=2023-12-18T15%3A11%3A56Z&amp;se=2023-12-18T17%3A11%3A56Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-12-18T10%3A38%3A00Z&amp;ske=2023-12-19T10%3A38%3A00Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=%2BWRRVHzWI%2B5LFVhG2t/Q5cBPPVGnsptLR1HDLmrrUIU%3D"
                                width="32"
                              />
                              <span
                                class="absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-green-400"
                              >
                              </span>
                            </div>
                            <a
                              th:href="@{/product/add}"
                              class="ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
                            >
                              Add product
                            </a>
                          </div>
                        </div>
                        <table class="min-w-full text-center">
                          <thead class="border-b bg-gray-800 text-white">
                            <tr>
                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                PRODUCT
                              </th>
                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                BARCODE
                              </th>
                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                CATEGORY
                              </th>
                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                IMPORT PRICE
                              </th>
                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                RETAIL PRICE
                              </th>

                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                EDIT
                              </th>

                              <th
                                class="text-sm font-medium px-6 py-4"
                                scope="col"
                              >
                                DELETE
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              class="bg-white border-b"
                              th:each="p: ${products}"
                            >
                              <td
                                class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                              >
                                <div class="flex items-center">
                                  <div class="flex-shrink-0 h-10 w-10">
                                    <img
                                      alt="Product Image"
                                      class="h-10 w-10 rounded-full"
                                      th:if="${p.picture != null}"
                                      th:src="'data:image/png;base64,' + ${imageUtils.encodeImage(p.picture)}"
                                      height="40"
                                      width="40"
                                    />
                                  </div>
                                  <div class="ml-4">
                                    <div
                                      class="text-sm font-medium text-gray-900"
                                      th:text="${p.productName}"
                                    ></div>
                                  </div>
                                </div>
                              </td>
                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                                th:text="${p.barcode}"
                              ></td>
                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                                th:text="${p.category}"
                              ></td>
                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                                th:text="${#numbers.formatCurrency(p.importPrice)}"
                              ></td>

                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                                th:text="${#numbers.formatCurrency(p.retailPrice)}"
                              ></td>

                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                              >
                                <a
                                  class="text-indigo-600 hover:text-indigo-900"
                                  th:href="@{'/product/edit/' + ${p.productId}}"
                                >
                                  Edit
                                </a>
                              </td>
                              <td
                                class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"
                              >
                                <a
                                  th:href="'#deleteProductModal-' + ${p.productId}"
                                  class="delete"
                                  data-toggle="modal"
                                  ><i
                                    class="material-icons"
                                    data-toggle="tooltip"
                                    title="Delete"
                                    >&#xE872;</i
                                  ></a
                                >
                              </td>
                            </tr>
                            <!-- Repeat for each product -->
                            <!-- ... -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <!-- Delete Modal HTML -->
    <div
      th:each="p : ${products}"
      th:id="'deleteProductModal-' + ${p.productId}"
      class="modal fade"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <form
            th:action="@{/product/delete/{id}(id=${p.productId})}"
            method="post"
          >
            <div class="modal-header">
              <h4 class="modal-title">Delete Product</h4>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-hidden="true"
              >
                &times;
              </button>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to delete these Records?</p>
              <p class="text-warning">
                <small>This action cannot be undone.</small>
              </p>
            </div>
            <div class="modal-footer">
              <input
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
                value="Cancel"
              />
              <input type="submit" class="btn btn-danger" value="Delete" />
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
